!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-axis"),require("d3-selection"),require("d3-brush"),require("d3-scale"),require("d3-shape"),require("d3-array"),require("preact"),require("typestyle")):"function"==typeof define&&define.amd?define(["exports","d3-axis","d3-selection","d3-brush","d3-scale","d3-shape","d3-array","preact","typestyle"],e):e(t.preactCharts={},t.d3Axis,t.d3Selection,t.d3Brush,t.d3Scale,t.d3Shape,t.d3Array,t.preact,t.typestyle)}(this,function(t,e,i,n,r,a,o,h,s){var c=s.style({fontSize:"1em",cursor:"default",userSelect:"none",$nest:{"&>.tick>line":{strokeWidth:"1px",strokeOpacity:.5,shapeRendering:"crispEdges"},"&>path":{strokeWidth:"2px"}}}),l=s.style({$nest:{"&>path":{stroke:"none"},"&>.tick>line":{strokeWidth:"1px",strokeOpacity:.5}}}),p=function(t){function n(){var n=this;t.apply(this,arguments),this.componentDidMount=function(){n.renderAxis()},this.componentDidUpdate=function(){n.renderAxis()},this.renderAxis=function(){"x"===n.props.axisType?(i.select(n.axis).call(e.axisBottom(n.props.scale).ticks(n.props.ticks)),n.props.rotateScaleText&&i.select(n.axis).selectAll("text").attr("dx","-.8em").attr("dy",".15em").style("text-anchor","end").attr("transform","rotate(-65)"),n.props.grid&&i.select(n.grid).call(e.axisBottom(n.props.scale).ticks(n.props.ticks).tickSize(-n.props.height).tickFormat(""))):"y"===n.props.axisType&&(i.select(n.axis).call(e.axisLeft(n.props.scale).ticks(n.props.ticks)),n.props.grid&&i.select(n.grid).call(e.axisLeft(n.props.scale).ticks(n.props.ticks).tickSize(-n.props.width).tickFormat("")))}}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.render=function(t){var e=this,i=t.grid,n=t.offsetX,r=n?"translate("+n+", 0)":"translate(0, "+t.height+")",a="x"===t.axisType.toLowerCase()||void 0!==n;return h.h("g",null,h.h("g",{ref:function(t){return e.axis=t},class:c,transform:a?r:""}),i&&h.h("g",{ref:function(t){return e.grid=t},class:l,transform:a?r:""}))},n}(h.Component);function d(t,e){return t.map(function(t){if(null!==t[e])return t[e]})}function u(t,e){return[].concat(new Set(d(t,e)))}p.defaultProps={height:null,width:null,scale:null,axisType:null,ticks:6,grid:!1,rotateScaleText:!1};var g=function(t){function e(e){var i=this;t.call(this,e),this.createBars=function(t,e){return i.props.data.map(function(i){return h.h("rect",{height:t.bandwidth(),x:e(Math.min(0,i.value)),y:t(i.name),width:Math.abs(e(i.value)-e(0)),fill:i.value<0?"darkred":"green",title:i.value.toFixed(4)})})},this.state={height:e.height,innerHeight:e.height-e.margin.top-e.margin.bottom,width:e.width,innerWidth:e.width-e.margin.right-e.margin.left}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){var i=this,n=t.margin,a=t.ticks,s=t.data,c=t.name,l=e.height,u=e.width,g=e.innerHeight,f=e.innerWidth,m=s.map(function(t){return Math.abs(t.value)}),x=o.max(m),y=[-x,x],b=d(s,"name"),v=r.scaleLinear().range([0,f]).domain(y).nice(),w=r.scaleBand().rangeRound([g,0]).paddingInner(.1).domain(b);return h.h("svg",{ref:function(t){return i.chartSVG=t},class:c,height:l,width:u},h.h("g",{transform:"translate("+n.left+", "+n.top+")"},s&&this.createBars(w,v),h.h(p,{height:g,axisType:"x",scale:v,rotateScaleText:!1,grid:!0}),h.h(p,{width:f,axisType:"y",scale:w,ticks:a,offsetX:v(0)})))},e.prototype.componentDidMount=function(){var t=this;this.resizeChart(),this.resizeOb=new ResizeObserver(function(e){for(var i=0,n=e;i<n.length;i+=1){var r=n[i].contentRect;r.width===t.state.width&&r.height===t.state.height||t.resizeChart()}}),this.resizeOb.observe(this.chartSVG.parentElement)},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect()},e.prototype.resizeChart=function(){var t=this.chartSVG.parentElement.getBoundingClientRect(),e=t.width,i=t.height;this.setState({innerWidth:e-this.props.margin.left-this.props.margin.right,innerHeight:i-this.props.margin.top-this.props.margin.bottom,height:i,width:e})},e}(h.Component);g.defaultProps={height:800,width:600,margin:{top:25,right:25,bottom:50,left:25},ticks:8};var f=["#4f8cff","#d3fe14","#fe1c3a","#fdd8eb","#01a571","#e609fd","#c48c0d","#70fffe","#968791","#b7ce9d","#c7a2fe","#fb7fb4","#26d10a","#24b6cb","#feaa83","#bed8fc","#47ffa4","#c76f5e","#fec82c","#799922","#fe7314","#8aa9a0","#f219a8","#ae74bc","#8fa2ca","#21d4b3","#dfefe9","#9873fd","#959064","#c4b2b0","#b1c60c","#fd82fe","#ffdea7","#cafc9d","#dca7d0","#69c979","#55ff07","#c16d91","#9cd2d1","#70c3ff","#c9ad70","#ff7874","#fc9c0f","#b2ffd6","#ee4c7a","#d7949a","#e2cafd","#08a90f","#6a94a2","#2cdefb","#139ad4","#9eb35d","#de67c5","#c05afe","#ae98c1","#b3bbc8","#21a499","#d88b52","#969cfe","#77a374","#feb4be","#90e466","#f7ef6a","#e6532c","#ccaf23","#e9e9fd","#8986c4","#b08978","#e3d4c9","#b2baf7","#cbcf67","#baf0fe","#48f8cf","#ce6e0c","#a7ac90","#8dd9ae","#e2f2c4","#89b5c6","#f7ba67","#72b93c","#bac6bc","#ffb0fe","#858f84","#d08edc","#a09538","#939aa5","#bb8ba8","#5ab597","#b08148","#69a5eb","#d4c2d5","#fd0edf","#ae85e1","#e3bc9c","#4ca14f","#dadd11","#d869ec","#a1a90e","#60c2bf","#8ebc96"],m=function(t){function e(e){var i=this;t.call(this,e),this.createBars=function(t,e,n,r,a,o){return a.map(function(a){return h.h("g",{transform:"translate("+t(a)+", 0)"},i.props.data[a].map(function(t){return h.h("rect",{width:e.bandwidth(),x:e(t.name),y:n(t.value),height:r-n(t.value),fill:o(t.name),title:t.value.toFixed(4)})}))})},this.state={height:e.height,innerHeight:e.height-e.margin.top-e.margin.bottom,width:e.width,innerWidth:e.width-e.margin.right-e.margin.left}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){for(var i=this,n=t.margin,a=t.ticks,s=t.data,c=t.groups,l=t.legendReference,d=t.name,g=e.height,m=e.width,x=e.innerHeight,y=e.innerWidth,b=0,v=0,w=c;v<w.length;v+=1){var S=o.max(s[w[v]],function(t){return t.value});b=S>b?S:b}var k=u(s[c[0]],"name"),C=r.scaleLinear().range([x,0]).domain([0,b]).nice(),z=r.scaleBand().rangeRound([0,y]).paddingInner(.1).domain(c),O=r.scaleBand().padding(.05).domain(k).rangeRound([0,z.bandwidth()]),_=r.scaleOrdinal(f);return h.h("svg",{ref:function(t){return i.chartSVG=t},class:d,height:g,width:m},h.h("g",{transform:"translate("+n.left+", "+n.top+")"},h.h(p,{height:x,axisType:"x",scale:z,rotateScaleText:!0}),h.h(p,{width:y,axisType:"y",scale:C,grid:!0,ticks:a}),s&&this.createBars(z,O,C,x,c,_),k&&k.map(function(t,e){return h.h("g",{transform:"translate(0, "+20*e+")"},h.h("rect",{x:y+n.right-18,width:18,height:15,strokeWidth:"1px",fill:_(t)}),h.h("text",{x:y+n.right-24,y:9,dy:"0.35em","text-anchor":"end"},l[t]))})))},e.prototype.componentDidMount=function(){var t=this;this.resizeChart(),this.resizeOb=new ResizeObserver(function(e){for(var i=0,n=e;i<n.length;i+=1){var r=n[i].contentRect;r.width===t.state.width&&r.height===t.state.height||t.resizeChart()}}),this.resizeOb.observe(this.chartSVG.parentElement)},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect()},e.prototype.resizeChart=function(){var t=this.chartSVG.parentElement.getBoundingClientRect(),e=t.width,i=t.height;this.setState({innerWidth:e-this.props.margin.left-this.props.margin.right,innerHeight:i-this.props.margin.top-this.props.margin.bottom,height:i,width:e})},e}(h.Component);m.defaultProps={height:500,width:500,margin:{top:25,right:25,bottom:75,left:50},ticks:6};var x=s.style({fillOpacity:1,strokeWidth:"1px"}),y=function(t){function e(e){t.call(this,e),this.state={width:e.width,height:e.height,innerWidth:e.width-e.margin.left-e.margin.right,innerHeight:e.height-e.margin.top-e.margin.bottom}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){var i=this,n=t.name,a=t.margin,s=t.x,c=t.ticks,l=t.barColour,d=t.barOutline,u=e.height,g=e.width,f=e.innerHeight,m=e.innerWidth,y=t.data.map(function(t){return t[s]}),b=o.min(y),v=1.01*o.max(y),w=r.scaleLinear().rangeRound([0,m]).domain([b,v]).nice(),S=o.histogram().domain(w.domain()).thresholds(w.ticks(c))(y),k=o.max(S,function(t){return t.length}),C=r.scaleLinear().range([f,0]).domain([0,k]),z=w(S[0].x1)-w(S[0].x0);return h.h("svg",{ref:function(t){return i.chartSVG=t},class:n,height:u,width:g},h.h("g",{transform:"translate("+a.left+", "+a.top+")"},h.h(p,{height:f,axisType:"x",scale:w,ticks:c,rotateScaleText:!0}),h.h(p,{width:m,axisType:"y",scale:C,grid:!0,ticks:8}),z&&S.map(function(t){return h.h("rect",{class:x,x:"1",width:z,height:f-C(t.length),transform:"translate("+w(t.x0)+", "+C(t.length)+")",fill:l,stroke:d})})))},e.prototype.componentDidMount=function(){var t=this;this.resizeChart(),this.resizeOb=new ResizeObserver(function(e){for(var i=0,n=e;i<n.length;i+=1){var r=n[i].contentRect;r.width===t.state.width&&r.height===t.state.height||t.resizeChart()}}),this.resizeOb.observe(this.chartSVG.parentElement)},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect()},e.prototype.resizeChart=function(){var t=this.chartSVG.parentElement.getBoundingClientRect(),e=t.width,i=t.height;this.setState({innerWidth:e-this.props.margin.left-this.props.margin.right,innerHeight:i-this.props.margin.top-this.props.margin.bottom,height:i,width:e})},e}(h.Component);y.defaultProps={height:250,width:350,margin:{top:25,right:25,bottom:75,left:50},ticks:8,barColour:"steelblue",barOutline:"black"};var b=function(t){function e(e){var i=this;t.call(this,e),this.createBars=function(t,e,n,r,a){return r.map(function(r){return h.h("g",{transform:"translate(0, "+t(r)+")"},i.props.data[r].map(function(t){return h.h("rect",{height:e.bandwidth(),x:0,y:e(t.name),width:n(t.value),fill:a(t.name),title:t.value.toFixed(4)})}))})},this.state={height:e.height,innerHeight:e.height-e.margin.top-e.margin.bottom,width:e.width,innerWidth:e.width-e.margin.right-e.margin.left}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){for(var i=this,n=t.margin,a=t.ticks,s=t.data,c=t.groups,l=t.name,d=t.legendReference,g=e.height,m=e.width,x=e.innerHeight,y=e.innerWidth,b=0,v=0,w=c;v<w.length;v+=1){var S=o.max(s[w[v]],function(t){return t.value});b=S>b?S:b}var k=u(s[c[0]],"name"),C=r.scaleLinear().range([0,y]).domain([0,b]).nice(),z=r.scaleBand().rangeRound([x,0]).paddingInner(.1).domain(c),O=r.scaleBand().padding(.05).domain(k).rangeRound([0,z.bandwidth()]),_=r.scaleOrdinal(f);return h.h("svg",{ref:function(t){return i.chartSVG=t},class:l,height:g,width:m},h.h("g",{transform:"translate("+n.left+", "+n.top+")"},h.h(p,{height:x,axisType:"x",scale:C,rotateScaleText:!1,grid:!0}),h.h(p,{width:y,axisType:"y",scale:z,ticks:a}),s&&this.createBars(z,O,C,c,_),k&&k.map(function(t,e){return h.h("g",{transform:"translate(0, "+20*e+")"},h.h("rect",{x:y+n.right-18,width:18,height:15,stroke:"black",strokeWidth:"1px",fill:_(t)}),h.h("text",{x:y+n.right-24,y:9,dy:"0.35em",fill:"whitesmoke","text-anchor":"end"},d[t]))})))},e.prototype.componentDidMount=function(){var t=this;this.resizeChart(),this.resizeOb=new ResizeObserver(function(e){for(var i=0,n=e;i<n.length;i+=1){var r=n[i].contentRect;r.width===t.state.width&&r.height===t.state.height||t.resizeChart()}}),this.resizeOb.observe(this.chartSVG.parentElement)},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect()},e.prototype.resizeChart=function(){var t=this.chartSVG.parentElement.getBoundingClientRect(),e=t.width,i=t.height;this.setState({innerWidth:e-this.props.margin.left-this.props.margin.right,innerHeight:i-this.props.margin.top-this.props.margin.bottom,height:i,width:e})},e}(h.Component);b.defaultProps={height:800,width:600,margin:{top:25,right:25,bottom:50,left:150},ticks:6};var v=function(t){function e(e){t.call(this,e);var i=e.width-e.margin.left-e.margin.right,n=e.height-e.margin.top-e.margin.bottom,r=e.data.flat(),a=o.extent(r,function(t){return t[e.x]}),h=[.95*a[0],1.05*a[1]],s=o.extent(r,function(t){return t[e.y]});this.state={width:e.width,height:e.height,innerWidth:i,innerHeight:n,xDomain:h,yDomain:[.95*s[0],1.05*s[1]]}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){var i=this,n=e.height,o=e.width,s=e.innerHeight,c=e.innerWidth,l=e.xDomain,d=e.yDomain;this.xScale=r.scaleLinear().range([0,c]).domain(l),this.yScale=r.scaleLinear().range([s,0]).domain(d);var u=a.line().x(function(e){return i.xScale(e[t.x])}).y(function(e){return i.yScale(e[t.y])}).curve(a.curveNatural);return h.h("svg",{ref:function(t){return i.chartSVG=t},class:t.name,height:n,width:o},h.h("g",{transform:"translate("+t.margin.left+", "+t.margin.top+")"},h.h("clipPath",{id:t.name+"_cp"},h.h("rect",{width:c,height:s})),h.h(p,{height:s,axisType:"x",scale:this.xScale,grid:!0}),h.h(p,{width:c,axisType:"y",scale:this.yScale,grid:!0}),t.data.map(function(e,n){return h.h("g",null,h.h("path",{d:u(e),"clip-path":"url(#"+t.name+"_cp)","stroke-linecap":"round",stroke:f[n],fill:"none","stroke-width":"2px"}),e.map(function(e,r){return h.h("circle",{"stroke-width":"1px",r:t.radius,cx:i.xScale(e[t.x]),cy:i.yScale(e[t.y]),key:r,fill:f[n],"clip-path":"url(#"+t.name+"_cp)"})}))}),t.labels&&h.h("text",{x:c/2,y:s+t.margin.bottom-15},t.x.replace(/_/g," ")),t.labels&&h.h("text",{x:-s/2,y:15-t.margin.left,transform:"rotate(-90)"},t.y.replace(/_/g," ")),t.legendReference&&t.legendReference.map(function(e,i){return h.h("g",{transform:"translate(0, "+20*i+")"},h.h("rect",{x:c+t.margin.right-18,width:18,height:15,strokeWidth:"1px",fill:f[i]}),h.h("text",{x:c+t.margin.right-24,y:9,dy:"0.35em","text-anchor":"end"},e.replace(/_/g," ")))}),h.h("g",{ref:function(t){return i.brush=t},key:1})))},e.prototype.componentDidMount=function(){var t=this;this.resizeChart(),this.resizeOb=new ResizeObserver(function(e){for(var i=0,n=e;i<n.length;i+=1){var r=n[i].contentRect;r.width===t.state.width&&r.height===t.state.height||t.resizeChart()}}),this.resizeOb.observe(this.chartSVG.parentElement)},e.prototype.componentWillReceiveProps=function(t,e){var i=t.data.flat(),n=o.extent(i,function(e){return e[t.x]}),r=[.95*n[0],1.05*n[1]],a=o.extent(i,function(e){return e[t.y]});this.setState({yDomain:[.95*a[0],1.05*a[1]],xDomain:r})},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect()},e.prototype.resizeChart=function(){var t=this,e=this.chartSVG.parentElement.getBoundingClientRect(),r=e.width,a=e.height,h=r-this.props.margin.left-this.props.margin.right,s=a-this.props.margin.top-this.props.margin.bottom;this.brushSetup=n.brush().extent([[0,0],[h,s]]).handleSize(10).on("end",function(){var e=i.event.selection;if(null===e){var n=t.props.data.flat(),r=o.extent(n,function(e){return e[t.props.x]}),a=[.95*r[0],1.05*r[1]],h=o.extent(n,function(e){return e[t.props.y]});t.setState({xDomain:a,yDomain:[.95*h[0],1.05*h[1]]})}else{var s=[e[0][0],e[1][0]].map(t.xScale.invert,t.xScale),c=[e[1][1],e[0][1]].map(t.yScale.invert,t.yScale);i.select(t.brush).call(t.brushSetup.move,null),t.setState({xDomain:s,yDomain:c})}}),i.select(this.brush).call(this.brushSetup),this.setState({innerWidth:h,innerHeight:s,height:a,width:r})},e}(h.Component);v.defaultProps={height:500,width:500,margin:{top:25,right:25,bottom:75,left:75},radius:5,labels:!1};var w=function(t){function e(e){var i=this;t.call(this,e),this.componentDidMount=function(){i.resizeChart(),i.resizeOb=new ResizeObserver(function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e].contentRect;r.width===i.state.width&&r.height===i.state.height||i.resizeChart()}}),i.resizeOb.observe(i.chartSVG.parentElement)},this.brushClass=s.style({$nest:{"&>rect.handle":{fill:e.brushColour}}}),this.state={width:e.width,height:e.height,innerWidth:e.width-e.margin.left-e.margin.right,innerHeight:e.height-e.margin.top-e.margin.bottom}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){var i=this,n=e.width,s=e.height,c=e.innerWidth,l=e.innerHeight;this.xScale=r.scaleTime().range([0,c]).domain([o.min(t.data,function(t){return t.timestamp}),o.max(t.data,function(t){return t.timestamp})]);var d=r.scaleLinear().range([l,0]).domain([o.min(t.data,function(e){return+e[t.y]}),o.max(t.data,function(e){return+e[t.y]})]),u=a.area().x(function(t){return i.xScale(t.timestamp)}).y0(l).y1(function(e){return d(+e[t.y])});return h.h("svg",{ref:function(t){return i.chartSVG=t},class:t.name,height:s,width:n},h.h("g",{transform:"translate("+t.margin.left+", "+t.margin.top+")"},h.h(p,{height:l,axisType:"x",scale:this.xScale}),h.h(p,{width:c,axisType:"y",scale:d,grid:!0,ticks:0}),h.h("path",{d:u(t.data),"stroke-linecap":"round",stroke:t.lineColour,fill:t.fillColour,"stroke-width":"1px"}),h.h("g",{ref:function(t){return i.brush=t},class:this.brushClass})))},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect(),i.select(this.brush).call(this.brushSetup.move,null)},e.prototype.resizeChart=function(){var t=this,e=this.chartSVG.parentElement.getBoundingClientRect(),r=e.width,a=e.height,o=r-this.props.margin.left-this.props.margin.right,h=a-this.props.margin.top-this.props.margin.bottom;this.xScale.range([0,o]),this.brushSetup=n.brushX().extent([[0,0],[o,h]]).handleSize(10).on("end",function(){var e=i.event.selection||[0,o],n=[t.xScale.invert(e[0]),t.xScale.invert(e[1])];t.setState({extent:i.event.selection?n:null}),t.props.onBrush(n)});var s=i.select(this.brush);s.call(this.brushSetup);var c=null==this.state.extent?null:[this.xScale(this.state.extent[0]),this.xScale(this.state.extent[1])];s.call(this.brushSetup.move,c),this.setState({innerWidth:o,innerHeight:h,height:a,width:r})},e}(h.Component);w.defaultProps={height:200,width:1e3,margin:{top:25,right:25,bottom:75,left:75},lineColour:"steelblue",fillColour:"steelblue",onBrush:function(){},brushColour:"darkgoldenrod"};var S=s.style({strokeWidth:"1px"}),k=function(t){function e(e){t.call(this,e);var i=e.width-e.margin.left-e.margin.right,n=e.height-e.margin.top-e.margin.bottom,r=o.extent(e.data,function(t){return t[e.x]}),a=[.95*r[0],1.05*r[1]],h=o.extent(e.data,function(t){return t[e.y]});this.state={width:e.width,height:e.height,innerWidth:i,innerHeight:n,xDomain:a,yDomain:[.95*h[0],1.05*h[1]]}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){var i=this,n=e.height,a=e.width,o=e.innerHeight,s=e.innerWidth,c=e.xDomain,l=e.yDomain;return this.xScale=r.scaleLinear().range([0,s]).domain(c),this.yScale=r.scaleLinear().range([o,0]).domain(l),h.h("svg",{ref:function(t){return i.chartSVG=t},class:t.name,height:n,width:a},h.h("g",{transform:"translate("+t.margin.left+", "+t.margin.top+")"},h.h("clipPath",{id:t.name+"_cp"},h.h("rect",{width:s,height:o})),h.h(p,{height:o,axisType:"x",scale:this.xScale,grid:!0}),h.h(p,{width:s,axisType:"y",scale:this.yScale,grid:!0}),t.data.map(function(e,n){return h.h("circle",{class:S,r:t.radius,cx:i.xScale(e[t.x]),cy:i.yScale(e[t.y]),key:n,"clip-path":"url(#"+t.name+"_cp)",fill:t.dotFill,stroke:t.dotBorder})}),t.labels&&h.h("text",{x:s/2,y:o+t.margin.bottom-15},t.x.replace(/_/g," ")),t.labels&&h.h("text",{x:-o/2,y:15-t.margin.left,transform:"rotate(-90)"},t.y.replace(/_/g," ")),h.h("g",{ref:function(t){return i.brush=t}})))},e.prototype.componentDidMount=function(){var t=this;this.resizeChart(),this.resizeOb=new ResizeObserver(function(e){for(var i=0,n=e;i<n.length;i+=1){var r=n[i].contentRect;r.width===t.state.width&&r.height===t.state.height||t.resizeChart()}}),this.resizeOb.observe(this.chartSVG.parentElement)},e.prototype.componentWillReceiveProps=function(t,e){var i=o.extent(t.data,function(e){return e[t.x]}),n=[.95*i[0],1.05*i[1]],r=o.extent(t.data,function(e){return e[t.y]});this.setState({yDomain:[.95*r[0],1.05*r[1]],xDomain:n})},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect()},e.prototype.resizeChart=function(){var t=this,e=this.chartSVG.parentElement.getBoundingClientRect(),r=e.width,a=e.height,h=r-this.props.margin.left-this.props.margin.right,s=a-this.props.margin.top-this.props.margin.bottom;this.brushSetup=n.brush().extent([[0,0],[h,s]]).handleSize(10).on("end",function(){var e=i.event.selection;if(null===e){var n=o.extent(t.props.data,function(e){return e[t.props.x]}),r=[.95*n[0],1.05*n[1]],a=o.extent(t.props.data,function(e){return e[t.props.y]});t.setState({xDomain:r,yDomain:[.95*a[0],1.05*a[1]]})}else{var h=[e[0][0],e[1][0]].map(t.xScale.invert,t.xScale),s=[e[1][1],e[0][1]].map(t.yScale.invert,t.yScale);i.select(t.brush).call(t.brushSetup.move,null),t.setState({xDomain:h,yDomain:s})}}),i.select(this.brush).call(this.brushSetup),this.setState({innerWidth:h,innerHeight:s,height:a,width:r})},e}(h.Component);k.defaultProps={height:500,width:500,margin:{top:25,right:25,bottom:75,left:75},radius:5,labels:!1,dotFill:"steelblue",dotBorder:"whitesmoke"};var C=s.style({fill:"none",pointerEvents:"all",borderTop:"none",borderStyle:"none"}),z=s.style({textAnchor:"middle",userSelect:"none",cursor:"pointer",$nest:{"&>text":{width:"12px",fontSize:"1.2em"}}}),O=function(t){function e(e){var i=this;t.call(this,e),this.handleChangeYDomain=function(t){var e=i.state.yDomain,n=e[1];switch(t){case"topup":e[1]*=1.05;break;case"topdown":e[1]*=.95;break;case"botup":e[0]+=.05*n;break;case"botdown":e[0]-=.05*n}e[0]=e[0]<0?0:e[0],i.setState({yDomain:e})},this.handleMouseOver=function(){i.setState({isMouseOver:!0})},this.handleMouseOut=function(){i.setState({isMouseOver:!1})},this.handleMouseMove=function(t){var e=t.offsetX-i.props.margin.left,n=i.xScale.invert(e),r=e<.1*i.state.innerWidth?"start":e<.9*i.state.innerWidth?"middle":"end",a=i.bisectDate(i.props.data,n,1),o=i.props.data[a-1],h=i.props.data[a],s=void 0===h?o:+n-+o.timestamp>+h.timestamp-+n?h:o;i.setState({tooltipValues:[s.timestamp,s[i.props.y]],textAnchor:r})},this.bisectDate=function(t,e,n){return o.bisector(function(t){return t[i.props.x]}).left(t,e,n)};var n=e.width-e.margin.left-e.margin.right,r=e.height-e.margin.top-e.margin.bottom,a=o.extent(e.data,function(t){return+t[e.y]});this.state={width:e.width,height:e.height,innerWidth:n,innerHeight:r,isMouseOver:!1,tooltipValues:[null,null],textAnchor:"middle",yDomain:a}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t,e){var i=this,n=e.innerWidth,s=e.innerHeight,c=e.height,l=e.width,d=e.isMouseOver,u=e.tooltipValues,g=e.textAnchor,f=e.yDomain,m=this.props.children,x=t.extent.length>0?t.extent:o.extent(t.data,function(e){return+e[t.x]});this.xScale=r.scaleTime().range([0,n]).domain(x);var y=r.scaleLinear().range([s,0]).domain(f),b=a.line().x(function(e){return i.xScale(e[t.x])}).y(function(e){return y(+e[t.y])});return h.h("svg",{ref:function(t){return i.chartSVG=t},class:t.name,height:c,width:l},t.axisControl&&h.h("g",{class:z,stroke:t.controlColour,transform:"translate("+.3*t.margin.left+", "+(t.margin.top+5)+")"},h.h("text",{onClick:function(){return i.handleChangeYDomain("topup")}},"+"),h.h("text",{transform:"translate(0, 15)",onClick:function(){return i.handleChangeYDomain("topdown")}},"-")),t.axisControl&&h.h("g",{class:z,stroke:t.controlColour,transform:"translate("+.3*t.margin.left+", "+s+")"},h.h("text",{onClick:function(){return i.handleChangeYDomain("botup")}},"+"),h.h("text",{transform:"translate(0, 15)",onClick:function(){return i.handleChangeYDomain("botdown")}},"-")),h.h("g",{transform:"translate("+t.margin.left+", "+t.margin.top+")"},h.h("clipPath",{id:t.name+"_cp"},h.h("rect",{width:n,height:s})),h.h(p,{height:s,axisType:"x",scale:this.xScale}),h.h(p,{width:n,axisType:"y",scale:y,grid:!0}),h.h("path",{d:b(t.data),"clip-path":"url(#"+t.name+"_cp)","stroke-linecap":"round",stroke:t.lineColour,fill:"none","stroke-width":"2px"}),m[0]&&m.map(function(e){return h.cloneElement(e,{xScale:i.xScale,height:s,chartName:t.name})}),d&&null!==u[0]&&h.h("g",{transform:"translate("+this.xScale(u[0])+","+y(u[1])+")"},h.h("circle",{fill:"none","stroke-width":2,stroke:"gold",r:"6"}),h.h("text",{x:0,y:-15,dy:"0.5em","text-anchor":g},u[0].toLocaleDateString()+" "+u[0].toLocaleTimeString()+":\n                                        "+u[1].toFixed(4))),t.tooltip&&t.data.length>0&&h.h("rect",{class:C,width:n,height:s,onMouseMove:this.handleMouseMove,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut}),m[0]&&m.map(function(e){return h.cloneElement(e,{xScale:i.xScale,height:s,chartName:t.name})})))},e.prototype.componentDidMount=function(){var t=this;this.resizeChart(),this.resizeOb=new ResizeObserver(function(e){for(var i=0,n=e;i<n.length;i+=1){var r=n[i].contentRect;r.width===t.state.width&&r.height===t.state.height||t.resizeChart()}}),this.resizeOb.observe(this.chartSVG.parentElement)},e.prototype.componentWillReceiveProps=function(t){var e=o.extent(t.data,function(e){return+e[t.y]});this.setState({yDomain:e})},e.prototype.componentWillUnmount=function(){this.resizeOb.disconnect()},e.prototype.resizeChart=function(){var t=this.chartSVG.parentElement.getBoundingClientRect(),e=t.width,i=t.height;this.setState({innerWidth:e-this.props.margin.left-this.props.margin.right,innerHeight:i-this.props.margin.top-this.props.margin.bottom,height:i,width:e})},e}(h.Component);O.defaultProps={height:200,width:1e3,margin:{top:25,right:25,bottom:75,left:75},lineColour:"lightblue",extent:[],tooltip:!0,axisControl:!0,controlColour:"goldenrod"};var _=s.style({fill:"gray",strokeWidth:1,strokeOpacity:.9,fillOpacity:.45,stroke:"lightgray",$nest:{"&:hover":{fill:"lightgray"}}}),W=s.style({fill:"red",fillOpacity:1}),D=s.style({fill:"lawngreen",fillOpacity:1}),R=function(t){function e(e){var i=this;t.call(this,e),this.handleFlagClick=function(t){t.stopPropagation(),i.props.onClick(i.props.event)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(t){var e=t.xScale,i=t.height,n=t.start,r=t.end,a=t.isClicked;return h.h("g",{class:_,onClick:this.handleFlagClick,"clip-path":"url(#"+t.chartName+"_cp)"},h.h("path",{d:"M "+e(n)+"                         "+i+" H "+e(r)+" V 20 H "+e(n)+" V "+i}),h.h("path",{class:a?D:W,d:"M "+e(r)+"                         20 L "+e(r)+" 0 L "+(e(r)-15)+" 8 L                         "+e(r)+" 16 V 20"}))},e}(h.Component);R.defaultProps={onClick:function(){},idx:0,event:0,start:"",end:"",type:"",sub_type:"",comment:null,chartName:"",isClicked:!1},t.DifferenceChart=g,t.GroupedBar=m,t.Histogram=y,t.HorizontalBar=b,t.LineScatter=v,t.RangeChart=w,t.ScatterPlot=k,t.TrendChart=O,t.Flag=R});
//# sourceMappingURL=preactCharts.umd.js.map
